language: cpp
compiler: gcc
dist: bionic
addons:
  apt:
    packages:
      - git
      - make
      - cmake
      - cmake-data
      - libhiredis-dev
      - libssl-dev
      - libgoogle-glog-dev
      - redis-server
service:
  - redis-server
jobs:
  include:
  - name: "Install redis-plus-plus dependency."
    script:
      - |
        git clone https://github.com/sewenew/redis-plus-plus.git && \
        cd redis-plus-plus && \
        mkdir compile && \
        cd compile && \
        cmake -DCMAKE_BUILD_TYPE=Release .. && \
        make && \
        sudo make install && \
        cd ../..
    - name: "Build and test Eventhub"
      script: make